(function (w, d, undefined) {

  // check logout cookie
  if (getCookie("logout")) {
    d.getElementById("admin_main").style.display = "none";
    setCookie("motyle", "true");
  }
  delCookie("logout");

  // GSC.init
  if (w.GSC.init) {
    w.GSC.data = {};

    // ShowLoader() - show rotating image loader inside element
    if (!w.GSC.ShowLoader) w.GSC.ShowLoader = function (el) {
      if (!el) return;
      $(el).html(
        '<div class="preloader-wrapper small active"><div class="spinner-layer spinner-blue-only"><div class="circle-clipper left"><div class=circle></div></div><div class=gap-patch><div class=circle></div></div><div class="circle-clipper right"><div class=circle></div></div></div></div>'
      );
    }

    // PingDot() - render red or green dot inside element
    if (!w.GSC.PingDot) w.GSC.PingDot = function (el, status = true) {
      if (!el) return;
      if (status) {
        status = "green";
      } else {
        status = "red";
      }
      $(el).html("&#8226;").css({
        color: status,
        opacity: 1
      }).fadeTo("slow", 0);
    }

    // GetCsvInfo()
    if (!w.GSC.GetCsvInfo) w.GSC.GetCsvInfo = function () {
      if (w.GSC.offline) { // offline
        return GSC.PingDot("#csv_ping", false);
      }

      // API: GetCsvInfo
      $.get("/admin/GetCsvInfo?" + Date.now(), function (data) {
          GSC.PingDot("#csv_ping");
          var content = "";
          var now = ~~(Date.now() / 1000);
          moment.locale("{{ lang }}");
          for (x in data.data) {
            var link = x;
            var csv = data.data[x]["csv"];
            var lines = data.data[x]["lines"];
            var sheet = data.data[x]["sheet"];
            if (!data.data[x]["sheet"]) continue;
            if (sheet) {
              link =
                '<a rel=noopener target=_blank title="{{ l.a_edit_gsheet_ttip }}" style="border-radius:2px" ' +
                'class="orange mono white-text bold" href="' +
                'https://docs.google.com/spreadsheets/d/' +
                sheet + '/edit#gid=0">&nbsp;<i class="material-icons white-text tiny">edit</i>&#8239;' +
                x + '&nbsp;</a>&nbsp;&nbsp;&nbsp;<a rel=noopener target=_blank title="{{ l.a_download_csv_ttip }}"' +
                ' style="border-radius:2px" class="bold blue white-text mono" ' +
                'href="https://docs.google.com/spreadsheets/d/e/' +
                csv + '/pub?gid=0&single=true&output=csv">&nbsp;<i class="fas white-text fa-cloud-download-alt"></i>&#8239;' +
                lines + '&nbsp;</a>&nbsp;';
            }
            content += (link + " {{ l.a_age }}&nbsp;" +
              moment.duration(Math.abs(~~((now - data.data[x]["timestamp"]))), "seconds").humanize() + "<br>"
            );
          }
          $("#a_update_info").html(content);
        })
        .fail(function (e) {
          if (e.status == 401) location.reload(); // reload when HTTP 401 - Unauthorized
          if (e.status == 403) location.reload(); // reload when HTTP 403 - Forbidden
          GSC.PingDot("#csv_ping", false);
          $("#a_update_info").addClass("bigemoji").html("ERROR ğŸ¤¯");
        });
    }

    // admin UI
    if (!w.GSC.AdminUI) w.GSC.AdminUI = function () {
      $("#admin_main div").addClass("a_reset");
      $("#admin_main h2").addClass("a_reset a_h2");
      $("#admin_main h4").addClass("a_reset a_h4");
      $("#admin_main h5").addClass("a_reset a_h5");
      $("#admin_main p").addClass("a_reset");

      // remove tooltips for touch display
      if (w.GSC.touch) {
        if ($(".tooltipped")) $(".tooltipped").tooltip("destroy");
      }

      // show variables
      $(".open_google").unbind();
      $(".open_google").click(function () {
        $(this).hide();
        $(".close_google").removeClass('hide').show();
        $("#variables").removeClass('hide').hide().show(200);
      });

      // show news
      $(".open_news").unbind();
      $(".open_news").click(function () {
        $(this).hide();
        $(".close_news").removeClass('hide').show();
        $("#news").removeClass('hide').hide().show(200);
      });

      // show news warning
      sha256($("#newscontent").html()).then(
        hash => {
          if (hash != localStorage.getItem("newshash")) {
            localStorage.setItem("newshash", hash);
            $("#newsdot").removeClass("hide");
            $(".open_news").click();
        }
      });

      // hide variables
      $(".close_google").unbind();
      $(".close_google").click(function () {
        $(this).hide();
        $(".open_google").removeClass('hide').show();
        $("#variables").hide(200);
      });

      // show translation source pins
      $(".trans_pin").click(function () {
        if ($(this).data('on') == '1') {
            M.toast({text: "â›”ï¸"});
            $(this).data('on', 0);    
            $('.sheetpin').remove();
        } else {
          $(this).data('on', 1);
          M.toast({text: "ğŸ“"});
          $('*[data-admin-tooltip]').each(function() {
            $(this).prepend('<b data-copy="' + $(this).data('admin-tooltip') + '" onclick="GSC.CopyThisText(this);" title="' + $(this).data('admin-tooltip') + '" class="hover sheetpin">ğŸ“&nbsp;</b>')
          });
        }
      });
    
      // hide news
      $(".close_news").unbind();
      $(".close_news").click(function () {
        $(this).hide();
        $(".open_news").removeClass('hide').show();
        $("#news").hide(200);
      });

      // editor block click
      $(".summernote").unbind();
      $(".summernote").click(function () {
        $(".summernote").unbind("dblclick");
        GSC.DeploySummernote();
      });

      // click + button
      $("#a_article").click(function () {
        var name = prompt('{{ l.a_article_add_prompt }}:').trim();
        name = name.replace(/['"/\\]/g, '');
        if (name.length && name != '!') {
          location.pathname = '{{ lang }}/id/' + name;
        }
      });

      // API: GetArticlesInfo
      $.get("/admin/GetArticlesInfo?" + Date.now(), function (data) {
        if (data && data.data) {
          $('#ArticleURLSelect').html('<option value="" disabled selected>&hellip;</option>');
          for (var i in data.data) {
            $('#ArticleURLSelect').append("<option value='" + data.data[i] + "'>" + data.data[i] + "</option>");
          }
          $('#ArticleURLSelect').formSelect(); // populate form data
        }
      });
    }

    // DeploySummernote()
    if (!w.GSC.DeploySummernote) w.GSC.DeploySummernote = function () {
      GSC.summernote_on = true;
      $("#a_summernote").attr("disabled", "disabled");
      $("#a_summernote").text("{{ l.a_save_all }}");
      $("#a_summernote").unbind("click");

      // SAVE ALL button
      $("#a_summernote").unbind();
      $("#a_summernote").click(function () {
        if (GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#summer_ping", false);
        }
        $("#a_summernote").attr("disabled", "disabled");
        var id;
        var data = {};
        $(".summernote").each(function (i, obj) { // collect HTML data
          id = $(obj).attr("id");
          if (id) {
            data[id] = $(obj).summernote("code");
          }
        });

        // API: UpdateArticles (POST - save all articles data)
        $.post("/admin/UpdateArticles", {
          hash: "{{ request_path_hash }}",
          path: window.location.pathname,
          data: JSON.stringify(data)
        }, function (data) {
          console.log("UpdateArticles result", {data});
          M.toast({text: "ğŸ’¾ {{ l.a_saved_ok }}"});
        }).done(function () {
          GSC.PingDot("#summer_ping");
          $("#a_summernote").removeAttr("disabled");
          GSC.AdminUI();
        }).fail(function (xhr, status, error) {
          alert(error); // show error message
          $("#a_summernote").removeAttr("disabled");
          GSC.PingDot("#summer_ping", false);
          M.toast({text: "{{ l.a_error_general }}"});
        });
      });

      // SaveAllButton() button
      var SaveAllButton = function (context) {
        var ui = $.summernote.ui;
        var button = ui.button({
          className: "note-btn-bold blue",
          contents: '<span title="ğŸ’¾ {{ l.a_summer_save_ttip }}"><i class="fas fa-save"></i>&nbsp;<b>{{ l.a_summer_save }}</b></span>',
          codeviewKeepButton: false,
          click: function (e) {
            $("#a_summernote").click();
          }
        });
        return button.render();
      }

      // DestroyButton() button
      var DestroyButton = function (context) {
        var ui = $.summernote.ui;
        var button = ui.button({
          className: "note-btn-bold",
          contents: '<span title="{{ l.a_summer_close_ttip }}"><i class="fas fa-window-close"></i>&nbsp;<b>{{ l.a_summer_close }}</b></span>',
          codeviewKeepButton: true,
          click: function (e) {
            $(".summernote").each(function (i, obj) {
              $(obj).summernote("destroy");
              GSC.AdminUI();
              $("#a_summernote").html('<i class="fas fa-edit"></i>{{ l.a_summernote }}');
              $("#a_summernote").unbind("click");
              $("#a_summernote").click(function () {
                GSC.ReadArticles(function () {
                  GSC.DeploySummernote();
                });
              });
              GSC.summernote_on = false;
            });
          }
        });
        return button.render();
      }

      // HistorySelector() listbox
      var HistorySelector = function (context) {
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_history_ttip }}" class="fas fa-history"></span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style",
            contents: "<ul></ul>",
            callback: function ($dropdown) {
              $dropdown.find("li").each(function () {
                $(this).click(function () {
                  context.invoke("editor.insertText", $(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji1Selector() listbox
      var Emoji1Selector = function (context) {
        var list = "";
        var emoji = "Â©,Â®,â“‚,â„¢,â‘ ,â‘¡,â‘¢,â‘£,â‘¤,â‘¥,â‘¦,â‘§,â‘¨,â‘©,Â¢,Â£,Â¥,Â§,Â¬,Â±,Â°,Â²,Â¶,Â«,Â»,Ã—,â€˜,â€™,â€œ,â€,â€ ,â€¡,â€¢,â€£,â€¦,â€²,â€³,â€¹,â€º,â‰,â€¼,â‚¬,â„“,â„µ,â„¹,Ï€,â€,âŒ˜,â†,â†‘,â†’,â†“,â†”,â†•,â†–,â†—,â†˜,â†™,â†©,â†ª,â†¶,â†·,â†º,â†»,â‡„,â‡’,â‡,â‡Ÿ,â‡¤,â‡¥,âˆ€,âˆ‚,âˆƒ,âˆ…,âˆˆ,âˆ‰,âˆ,âˆ‘,âˆš,âˆ,âˆ¡,âˆ§,âˆ¨,âˆ«,â‰ˆ,â‰”,â‰ ,â‰¡,â‰¤,â‰¥,âŠ‚,âŠƒ,âŠ„,âŠ†,âŠ‡,âŠ•,âŠ—,âŠ™,â‹‚,â‹ƒ,âŒˆ,âŒ‰,âŒŠ,âŒ‹,â– ,â–ª,â–«,â–²,â–³,â–¶,â–·,â–¼,â–½,â—€,â—,â—†,â—,â—»,â—¼,â—½,â—¾,âŒ¦,âŒ¨,âŒ«,âˆ,â,âœ,âœ’,âœ“,âœ”,âœ–,âœš,âœ,âœ¡,âœ³,âœ´,â„,â‡,â£,â¦,â¬†,â¬‡,â˜€,â˜,â˜‚,â˜ƒ,â˜„,â˜…,â˜†,â˜‡,â˜ˆ,â˜,â˜‘,â˜˜,â˜™,â˜ ,â˜¢,â˜£,â˜¦,â˜ª,â˜­,â˜®,â˜¯,â˜¸,â˜¹,â˜¼,â˜¾,â™€,â™‚,â™ ,â™£,â™¥,â™¦,â™,â™Ÿ,â™˜,â™¨,â™©,â™ª,â™«,â™¬,â™²,â™»,â™¾,âš’,âš“,âš”,âš•,âš–,âš—,âš™,âš›,âšœ,âš ,âœ‚,âœˆ,âœ‰,â™ˆ,â™‰,â™Š,â™‹,â™Œ,â™,â™,â™,â™,â™‘,â™’,â™“";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji1_ttip }}">Â©</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji2Selector() listbox
      var Emoji2Selector = function (context) {
        var list = "";
        var emoji = "ğŸ˜€,ğŸ˜ƒ,ğŸ˜„,ğŸ˜,ğŸ˜†,ğŸ˜…,ğŸ¤£,ğŸ˜‚,ğŸ™‚,ğŸ™ƒ,ğŸ˜‰,ğŸ˜Š,ğŸ˜‡,ğŸ¥°,ğŸ˜,ğŸ¤©,ğŸ˜˜,ğŸ˜—,ğŸ˜š,ğŸ˜™,ğŸ˜‹,ğŸ˜›,ğŸ˜œ,ğŸ¤ª,ğŸ˜,ğŸ¤‘,ğŸ¤—,ğŸ¤­,ğŸ¤«,ğŸ¤”,ğŸ¤,ğŸ¤¨,ğŸ˜,ğŸ˜‘,ğŸ˜¶,ğŸ˜,ğŸ˜’,ğŸ™„,ğŸ˜¬,ğŸ¤¥,ğŸ˜Œ,ğŸ˜”,ğŸ˜ª,ğŸ¤¤,ğŸ˜´,ğŸ˜·,ğŸ¤’,ğŸ¤•,ğŸ¤¢,ğŸ¤®,ğŸ¤§,ğŸ¥µ,ğŸ¥¶,ğŸ¥´,ğŸ˜µ,ğŸ¤¯,ğŸ¤ ,ğŸ¥³,ğŸ˜,ğŸ¤“,ğŸ§,ğŸ˜•,ğŸ˜Ÿ,ğŸ™,ğŸ˜®,ğŸ˜¯,ğŸ˜²,ğŸ˜³,ğŸ¥º,ğŸ˜¦,ğŸ˜§,ğŸ˜¨,ğŸ˜°,ğŸ˜¥,ğŸ˜¢,ğŸ˜­,ğŸ˜±,ğŸ˜–,ğŸ˜£,ğŸ˜,ğŸ˜“,ğŸ˜©,ğŸ˜«,ğŸ˜¤,ğŸ˜¡,ğŸ˜ ,ğŸ¤¬,ğŸ˜ˆ,ğŸ‘¿,ğŸ’€,ğŸ’©,ğŸ¤¡,ğŸ‘¹,ğŸ‘º,ğŸ‘»,ğŸ‘½,ğŸ‘¾,ğŸ¤–,ğŸ˜º,ğŸ˜¸,ğŸ˜¹,ğŸ˜»,ğŸ˜¼,ğŸ˜½,ğŸ™€,ğŸ˜¿,ğŸ˜¾,ğŸ’‹,ğŸ‘‹,ğŸ¤š,ğŸ–ï¸,âœ‹,ğŸ––,ğŸ‘Œ,ğŸ¤,ğŸ¤Ÿ,ğŸ¤˜,ğŸ¤™,ğŸ‘ˆ,ğŸ‘‰,ğŸ‘†,ğŸ–•,ğŸ‘‡,ğŸ‘,ğŸ‘,âœŠ,ğŸ‘Š,ğŸ¤›,ğŸ¤œ,ğŸ‘,ğŸ™Œ,ğŸ‘,ğŸ¤²,ğŸ¤,ğŸ™,ğŸ’…,ğŸ¤³,ğŸ’ª,ğŸ¦µ,ğŸ¦¶,ğŸ‘‚,ğŸ‘ƒ,ğŸ§ ,ğŸ¦·,ğŸ¦´,ğŸ‘€,ğŸ‘ï¸,ğŸ‘…,ğŸ‘„,ğŸ‘¶,ğŸ§’,ğŸ‘¦,ğŸ‘§,ğŸ§‘,ğŸ‘±,ğŸ‘¨,ğŸ§”,ğŸ‘¨â€ğŸ¦°,ğŸ‘¨â€ğŸ¦±,ğŸ‘¨â€ğŸ¦³,ğŸ‘¨â€ğŸ¦²,ğŸ‘©,ğŸ‘©â€ğŸ¦°,ğŸ‘©â€ğŸ¦±,ğŸ‘©â€ğŸ¦³,ğŸ‘©â€ğŸ¦²,ğŸ‘±â€â™€ï¸,ğŸ‘±â€â™‚ï¸,ğŸ§“,ğŸ‘´,ğŸ‘µ,ğŸ™â€â™‚ï¸,ğŸ™â€â™€ï¸,ğŸ™,ğŸ™â€â™‚ï¸,ğŸ™â€â™€ï¸,ğŸ™…â€â™‚ï¸,ğŸ™…â€â™€ï¸,ğŸ™†â€â™‚ï¸,ğŸ™†â€â™€ï¸,ğŸ’â€â™‚ï¸,ğŸ’â€â™€ï¸,ğŸ™‹â€â™‚ï¸,ğŸ™‹â€â™€ï¸,ğŸ™‡â€â™‚ï¸,ğŸ™‡â€â™€ï¸,ğŸ¤¦â€â™‚ï¸,ğŸ¤¦â€â™€ï¸,ğŸ¤·â€â™‚ï¸,ğŸ¤·â€â™€ï¸,ğŸ‘¨â€âš•ï¸,ğŸ‘©â€âš•ï¸,ğŸ‘¨â€ğŸ“,ğŸ‘©â€ğŸ“,ğŸ‘¨â€ğŸ«,ğŸ‘©â€ğŸ«,ğŸ‘¨â€âš–ï¸,ğŸ‘©â€âš–ï¸,ğŸ‘©â€ğŸŒ¾,ğŸ‘©â€ğŸ³,ğŸ‘¨â€ğŸ”§,ğŸ‘©â€ğŸ”§,ğŸ‘¨â€ğŸ­,ğŸ‘©â€ğŸ­,ğŸ‘¨â€ğŸ’¼,ğŸ‘©â€ğŸ’¼,ğŸ‘¨â€ğŸ”¬,ğŸ‘©â€ğŸ”¬,ğŸ‘¨â€ğŸ’»,ğŸ‘©â€ğŸ’»,ğŸ‘¨â€ğŸ¤,ğŸ‘©â€ğŸ¤,ğŸ‘¨â€ğŸ¨,ğŸ‘©â€ğŸ¨,ğŸ‘¨â€âœˆï¸,ğŸ‘©â€âœˆï¸,ğŸ‘¨â€ğŸš€,ğŸ‘©â€ğŸš€,ğŸ‘¨â€ğŸš’,ğŸ‘©â€ğŸš’,ğŸ‘®â€â™‚ï¸,ğŸ‘®â€â™€ï¸,ğŸ•µï¸â€â™‚ï¸,ğŸ•µï¸â€â™€ï¸,ğŸ’‚â€â™‚ï¸,ğŸ’‚â€â™€ï¸,ğŸ‘·â€â™‚ï¸,ğŸ‘·â€â™€ï¸,ğŸ¤´,ğŸ‘¸,ğŸ‘³â€â™‚ï¸,ğŸ‘³â€â™€ï¸,ğŸ‘²,ğŸ§•,ğŸ¤µ,ğŸ‘°,ğŸ¤°,ğŸ¤±,ğŸ‘¼,ğŸ…,ğŸ¤¶,ğŸ¦¸â€â™‚ï¸,ğŸ¦¹â€â™€ï¸,ğŸ§™,ğŸ§™â€â™‚ï¸,ğŸ§šâ€â™‚ï¸,ğŸ§šâ€â™€ï¸,ğŸ§›â€â™‚ï¸,ğŸ§›â€â™€ï¸,ğŸ§œ,ğŸ§œâ€â™‚ï¸,ğŸ§œâ€â™€ï¸,ğŸ§â€â™‚ï¸,ğŸ§â€â™€ï¸,ğŸ§â€â™‚ï¸,ğŸ§â€â™€ï¸,ğŸ§Ÿâ€â™‚ï¸,ğŸ§Ÿâ€â™€ï¸,ğŸ’†â€â™‚ï¸,ğŸ’†â€â™€ï¸,ğŸ’‡â€â™‚ï¸,ğŸ’‡â€â™€ï¸,ğŸš¶â€â™‚ï¸,ğŸš¶â€â™€ï¸,ğŸƒâ€â™‚ï¸,ğŸƒâ€â™€ï¸,ğŸ’ƒ,ğŸ•º,ğŸ•´ï¸,ğŸ‘¯â€â™‚ï¸,ğŸ§–â€â™‚ï¸,ğŸ§–â€â™€ï¸,ğŸ§˜,ğŸ‘­,ğŸ‘«,ğŸ‘¬,ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨,ğŸ‘©â€â¤ï¸â€ğŸ’‹â€ğŸ‘©,ğŸ‘¨â€â¤ï¸â€ğŸ‘¨,ğŸ‘©â€â¤ï¸â€ğŸ‘©,ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘©â€ğŸ‘§,ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§,ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§,ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§,ğŸ‘©â€ğŸ‘©â€ğŸ‘¦,ğŸ‘©â€ğŸ‘©â€ğŸ‘§,ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦,ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦,ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§,ğŸ‘¨â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘§,ğŸ‘¨â€ğŸ‘§â€ğŸ‘¦,ğŸ‘¨â€ğŸ‘§â€ğŸ‘§,ğŸ‘©â€ğŸ‘¦,ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦,ğŸ‘©â€ğŸ‘§,ğŸ‘©â€ğŸ‘§â€ğŸ‘¦,ğŸ‘©â€ğŸ‘§â€ğŸ‘§";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji2_ttip }}">ğŸ˜€</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji3Selector() listbox
      var Emoji3Selector = function (context) {
        var list = "";
        var emoji = "ğŸµ,ğŸ™ˆ,ğŸ™‰,ğŸ™Š,ğŸ’¥,ğŸ’«,ğŸ’¦,ğŸ’¨,ğŸ’,ğŸ¦,ğŸ¶,ğŸ•,ğŸ©,ğŸº,ğŸ¦Š,ğŸ¦,ğŸ±,ğŸˆ,ğŸ¦,ğŸ¯,ğŸ…,ğŸ†,ğŸ´,ğŸ,ğŸ¦„,ğŸ¦“,ğŸ¦Œ,ğŸ®,ğŸ‚,ğŸƒ,ğŸ„,ğŸ·,ğŸ–,ğŸ—,ğŸ½,ğŸ,ğŸ‘,ğŸ,ğŸª,ğŸ«,ğŸ¦™,ğŸ¦’,ğŸ˜,ğŸ¦,ğŸ¦›,ğŸ­,ğŸ,ğŸ€,ğŸ¹,ğŸ°,ğŸ‡,ğŸ¿ï¸,ğŸ¦”,ğŸ¦‡,ğŸ»,ğŸ¨,ğŸ¼,ğŸ¦˜,ğŸ¦¡,ğŸ¾,ğŸ¦ƒ,ğŸ”,ğŸ“,ğŸ£,ğŸ¤,ğŸ¥,ğŸ¦,ğŸ§,ğŸ•Šï¸,ğŸ¦…,ğŸ¦†,ğŸ¦¢,ğŸ¦‰,ğŸ¦š,ğŸ¦œ,ğŸ¸,ğŸŠ,ğŸ¢,ğŸ¦,ğŸ,ğŸ²,ğŸ‰,ğŸ¦•,ğŸ¦–,ğŸ³,ğŸ‹,ğŸ¬,ğŸŸ,ğŸ ,ğŸ¡,ğŸ¦ˆ,ğŸ™,ğŸš,ğŸŒ,ğŸ¦‹,ğŸ›,ğŸœ,ğŸ,ğŸ,ğŸ¦—,ğŸ•·ï¸,ğŸ•¸ï¸,ğŸ¦‚,ğŸ¦Ÿ,ğŸ¦ ,ğŸ’,ğŸŒ¸,ğŸ’®,ğŸµï¸,ğŸŒ¹,ğŸ¥€,ğŸŒº,ğŸŒ»,ğŸŒ¼,ğŸŒ·,ğŸŒ±,ğŸŒ²,ğŸŒ³,ğŸŒ´,ğŸŒµ,ğŸŒ¾,ğŸŒ¿,ğŸ€,ğŸ,ğŸ‚,ğŸƒ,ğŸ„,ğŸŒ°,ğŸ¦€,ğŸ¦,ğŸ¦,ğŸ¦‘,ğŸŒ,ğŸŒ,ğŸŒ,ğŸŒ,ğŸŒ‘,ğŸŒ’,ğŸŒ“,ğŸŒ”,ğŸŒ•,ğŸŒ–,ğŸŒ—,ğŸŒ˜,ğŸŒ™,ğŸŒš,ğŸŒ›,ğŸŒœ,ğŸŒ,ğŸŒ,â­,ğŸŒŸ,ğŸŒ ,â›…,â›ˆï¸,ğŸŒ¤ï¸,ğŸŒ¥ï¸,ğŸŒ¦ï¸,ğŸŒ§ï¸,ğŸŒ¨ï¸,ğŸŒ©ï¸,ğŸŒªï¸,ğŸŒ«ï¸,ğŸŒ¬ï¸,ğŸŒˆ,â›„,ğŸ”¥,ğŸ’§,ğŸŒŠ,ğŸ„,âœ¨,ğŸ‹,ğŸ";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji3_ttip }}">ğŸµ</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji4Selector() listbox
      var Emoji4Selector = function (context) {
        var list = "";
        var emoji = "ğŸ“,ğŸ‡,ğŸˆ,ğŸ‰,ğŸŠ,ğŸ‹,ğŸŒ,ğŸ,ğŸ¥­,ğŸ,ğŸ,ğŸ,ğŸ‘,ğŸ’,ğŸ¥,ğŸ…,ğŸ¥¥,ğŸ¥‘,ğŸ†,ğŸ¥”,ğŸ¥•,ğŸŒ½,ğŸŒ¶ï¸,ğŸ¥’,ğŸ¥¬,ğŸ¥¦,ğŸ„,ğŸ¥œ,ğŸŒ°,ğŸ,ğŸ¥,ğŸ¥–,ğŸ¥¨,ğŸ¥¯,ğŸ¥,ğŸ§€,ğŸ–,ğŸ—,ğŸ¥©,ğŸ¥“,ğŸ”,ğŸŸ,ğŸ•,ğŸŒ­,ğŸ¥ª,ğŸŒ®,ğŸŒ¯,ğŸ¥™,ğŸ¥š,ğŸ³,ğŸ¥˜,ğŸ²,ğŸ¥£,ğŸ¥—,ğŸ¿,ğŸ§‚,ğŸ¥«,ğŸ±,ğŸ˜,ğŸ™,ğŸš,ğŸ›,ğŸœ,ğŸ,ğŸ ,ğŸ¢,ğŸ£,ğŸ¤,ğŸ¥,ğŸ¥®,ğŸ¡,ğŸ¥Ÿ,ğŸ¥ ,ğŸ¥¡,ğŸ¦,ğŸ§,ğŸ¨,ğŸ©,ğŸª,ğŸ‚,ğŸ°,ğŸ§,ğŸ¥§,ğŸ«,ğŸ¬,ğŸ­,ğŸ®,ğŸ¯,ğŸ¼,ğŸ¥›,ğŸµ,ğŸ¶,ğŸ¾,ğŸ·,ğŸ¸,ğŸ¹,ğŸº,ğŸ»,ğŸ¥‚,ğŸ¥ƒ,ğŸ¥¤,ğŸ¥¢,ğŸ½ï¸,ğŸ´,ğŸ¥„";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji4_ttip }}">ğŸ“</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji5Selector() listbox
      var Emoji5Selector = function (context) {
        var list = "";
        var emoji = "ğŸ†,ğŸ–ï¸,ğŸ…,ğŸ¥‡,ğŸ¥ˆ,ğŸ¥‰,ğŸ§—â€â™‚ï¸,ğŸ§—â€â™€ï¸,ğŸ•´ï¸,ğŸ¤º,ğŸ‡,â›·ï¸,ğŸ‚,ğŸŒï¸â€â™‚ï¸,ğŸŒï¸â€â™€ï¸,ğŸ„â€â™‚ï¸,ğŸ„â€â™€ï¸,ğŸš£â€â™‚ï¸,ğŸš£â€â™€ï¸,ğŸŠâ€â™‚ï¸,ğŸŠâ€â™€ï¸,â›¹ï¸â€â™‚ï¸,â›¹ï¸â€â™€ï¸,ğŸ‹ï¸â€â™‚ï¸,ğŸ‹ï¸â€â™€ï¸,ğŸš´â€â™‚ï¸,ğŸš´â€â™€ï¸,ğŸšµâ€â™‚ï¸,ğŸšµâ€â™€ï¸,ğŸ¤¸â€â™‚ï¸,ğŸ¤¸â€â™€ï¸,ğŸ¤¼â€â™‚ï¸,ğŸ¤¼â€â™€ï¸,ğŸ¤½â€â™‚ï¸,ğŸ¤½â€â™€ï¸,ğŸ¤¾â€â™‚ï¸,ğŸ¤¾â€â™€ï¸,ğŸ¤¹â€â™‚ï¸,ğŸ¤¹â€â™€ï¸,ğŸ­,ğŸ§˜â€â™‚ï¸,ğŸ§˜â€â™€ï¸,ğŸª,ğŸ›¹,ğŸ›¶,ğŸ—ï¸,ğŸŸï¸,ğŸ«,âš½,âš¾,ğŸ¥,ğŸ€,ğŸ,ğŸˆ,ğŸ‰,ğŸ¾,ğŸ¥,ğŸ³,ğŸ,ğŸ‘,ğŸ’,ğŸ¥,ğŸ“,ğŸ¸,ğŸ¥Š,ğŸ¥‹,ğŸ¥…,â›³,â›¸ï¸,ğŸ£,ğŸ½,ğŸ¿,ğŸ›·,ğŸ¥Œ,ğŸ¯,ğŸ±,ğŸ®,ğŸ°,ğŸ²,ğŸ§©,ğŸ¨,ğŸ§µ,ğŸ§¶,ğŸ¼,ğŸ¤,ğŸ§,ğŸ·,ğŸ¸,ğŸ¹,ğŸº,ğŸ»,ğŸ¥,ğŸ¬,ğŸ¹,ğŸ—£ï¸,ğŸ‘¤,ğŸ‘¥,ğŸ‘£,ğŸ’´,ğŸ’µ,ğŸ’¶,ğŸ’·,ğŸ’£,ğŸ’Œ,ğŸ•³ï¸,ğŸ›€,ğŸ›Œ,ğŸ”ª,ğŸº,ğŸ—ºï¸,ğŸ§­,ğŸ§±,ğŸ’ˆ,ğŸ›¢ï¸,ğŸ›ï¸,ğŸ§³,âŒ›,â³,âŒš,â°,â±ï¸,â²ï¸,ğŸ•°ï¸,ğŸŒ¡ï¸,â›±ï¸,ğŸ§¨,ğŸˆ,ğŸ‰,ğŸŠ,ğŸ,ğŸ,ğŸ,ğŸ§§,ğŸ€,ğŸ,ğŸ”®,ğŸ§¿,ğŸ•¹ï¸,ğŸ§¸,ğŸ–¼ï¸,ğŸ§µ,ğŸ§¶,ğŸ›ï¸,ğŸ“¿,ğŸ’,ğŸ“¯,ğŸ™ï¸,ğŸšï¸,ğŸ›ï¸,ğŸ“»,ğŸ“±,ğŸ“²,ğŸ“,ğŸ“Ÿ,ğŸ“ ,ğŸ”‹,ğŸ”Œ,ğŸ’»,ğŸ–¥ï¸,ğŸ–¨ï¸,ğŸ–±ï¸,ğŸ–²ï¸,ğŸ’½,ğŸ’¾,ğŸ’¿,ğŸ“€,ğŸ§®,ğŸ¥,ğŸï¸,ğŸ“½ï¸,ğŸ“º,ğŸ“·,ğŸ“¸,ğŸ“¹,ğŸ“¼,ğŸ”,ğŸ”,ğŸ•¯ï¸,ğŸ’¡,ğŸ”¦,ğŸ®,ğŸ“”,ğŸ“•,ğŸ“–,ğŸ“—,ğŸ“˜,ğŸ“™,ğŸ“š,ğŸ““,ğŸ“’,ğŸ“ƒ,ğŸ“œ,ğŸ“„,ğŸ“°,ğŸ—ï¸,ğŸ“‘,ğŸ”–,ğŸ·ï¸,ğŸ’°,ğŸ’¸,ğŸ’³,ğŸ§¾,ğŸ“§,ğŸ“¨,ğŸ“©,ğŸ“¤,ğŸ“¥,ğŸ“¦,ğŸ“«,ğŸ“ª,ğŸ“¬,ğŸ“­,ğŸ“®,ğŸ—³ï¸,ğŸ–‹ï¸,ğŸ–Šï¸,ğŸ–Œï¸,ğŸ–ï¸,ğŸ“,ğŸ“,ğŸ“‚,ğŸ—‚ï¸,ğŸ“…,ğŸ“†,ğŸ—“ï¸,ğŸ“‡,ğŸ“ˆ,ğŸ“‰,ğŸ“Š,ğŸ—’ï¸,ğŸ“‹,ğŸ“Œ,ğŸ“,ğŸ“,ğŸ–‡ï¸,ğŸ“,ğŸ“,ğŸ—ƒï¸,ğŸ—„ï¸,ğŸ—‘ï¸,ğŸ”’,ğŸ”“,ğŸ”,ğŸ”,ğŸ”‘,ğŸ—ï¸,ğŸ”¨,â›ï¸,ğŸ› ï¸,ğŸ—¡ï¸,ğŸ”«,ğŸ›¡ï¸,ğŸ”§,ğŸ”©,ğŸ—œï¸,ğŸ”—,â›“ï¸,ğŸ§°,ğŸ§²,ğŸ§ª,ğŸ§«,ğŸ§¬,ğŸ”¬,ğŸ”­,ğŸ“¡,ğŸ’‰,ğŸ’Š,ğŸšª,ğŸ›ï¸,ğŸ›‹ï¸,ğŸš½,ğŸš¿,ğŸ›,ğŸ§´,ğŸ§·,ğŸ§¹,ğŸ§º,ğŸ§»,ğŸ§¼,ğŸ§½,ğŸ§¯,ğŸ›’,ğŸš¬,ğŸ—¿,ğŸ§³,ğŸŒ‚,ğŸƒ,ğŸ§µ,ğŸ§¶,ğŸ‘“,ğŸ•¶ï¸,ğŸ¥½,ğŸ¥¼,ğŸ‘”,ğŸ‘•,ğŸ‘–,ğŸ§£,ğŸ§¤,ğŸ§¥,ğŸ§¦,ğŸ‘—,ğŸ‘˜,ğŸ‘™,ğŸ‘š,ğŸ‘›,ğŸ‘œ,ğŸ‘,ğŸ’,ğŸ‘,ğŸ‘Ÿ,ğŸ¥¾,ğŸ¥¿,ğŸ‘ ,ğŸ‘¡,ğŸ‘¢,ğŸ‘‘,ğŸ‘’,ğŸ©,ğŸ“,ğŸ§¢,â›‘ï¸,ğŸ’„,ğŸ’,ğŸ’¼";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji5_ttip }}">ğŸ†</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji6Selector() listbox
      var Emoji6Selector = function (context) {
        var list = "";
        var emoji = "ğŸ¡,ğŸ ,ğŸ˜ï¸,ğŸš£,ğŸ—¾,ğŸ”ï¸,â›°ï¸,ğŸŒ‹,ğŸ—»,ğŸ•ï¸,ğŸ–ï¸,ğŸœï¸,ğŸï¸,ğŸï¸,ğŸŸï¸,ğŸ›ï¸,ğŸ—ï¸,ğŸšï¸,ğŸ¢,ğŸ£,ğŸ¤,ğŸ¥,ğŸ¦,ğŸ¨,ğŸ©,ğŸª,ğŸ«,ğŸ¬,ğŸ­,ğŸ¯,ğŸ°,ğŸ’’,ğŸ—¼,ğŸ—½,â›ª,ğŸ•Œ,ğŸ•,â›©ï¸,ğŸ•‹,â›²,â›º,ğŸŒ,ğŸŒƒ,ğŸ™ï¸,ğŸŒ„,ğŸŒ…,ğŸŒ†,ğŸŒ‡,ğŸŒ‰,ğŸ ,ğŸ¡,ğŸ¢,ğŸš‚,ğŸšƒ,ğŸš„,ğŸš…,ğŸš†,ğŸš‡,ğŸšˆ,ğŸš‰,ğŸšŠ,ğŸš,ğŸš,ğŸš‹,ğŸšŒ,ğŸš,ğŸš,ğŸš,ğŸš‘,ğŸš’,ğŸš“,ğŸš”,ğŸš•,ğŸš–,ğŸš—,ğŸš˜,ğŸš™,ğŸšš,ğŸš›,ğŸšœ,ğŸï¸,ğŸï¸,ğŸ›µ,ğŸš²,ğŸ›´,ğŸš,ğŸ›£ï¸,ğŸ›¤ï¸,â›½,ğŸš¨,ğŸš¥,ğŸš¦,ğŸš§,â›µ,ğŸš¤,ğŸ›³ï¸,â›´ï¸,ğŸ›¥ï¸,ğŸš¢,ğŸ›©ï¸,ğŸ›«,ğŸ›¬,ğŸ’º,ğŸš,ğŸšŸ,ğŸš ,ğŸš¡,ğŸ›°ï¸,ğŸš€,ğŸ›¸,ğŸŒ ,ğŸŒŒ,â›±ï¸,ğŸ†,ğŸ‡,ğŸ‘,ğŸ›‚,ğŸ›ƒ,ğŸ›„,ğŸ›…";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji6_ttip }}">ğŸ¡</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // Emoji7Selector() listbox
      var Emoji7Selector = function (context) {
        var list = "";
        var emoji = "ğŸ’˜,ğŸ’,ğŸ’–,ğŸ’—,ğŸ’“,ğŸ’,ğŸ’•,ğŸ’Ÿ,ğŸ’”,ğŸ§¡,ğŸ’›,ğŸ’š,ğŸ’™,ğŸ’œ,ğŸ–¤,ğŸ’¯,ğŸ’¢,ğŸ’¬,ğŸ‘ï¸â€ğŸ—¨ï¸,ğŸ—¨ï¸,ğŸ—¯ï¸,ğŸ’­,ğŸ’¤,ğŸ’®,ğŸ›‘,ğŸ•›,ğŸ•§,ğŸ•,ğŸ•œ,ğŸ•‘,ğŸ•,ğŸ•’,ğŸ•,ğŸ•“,ğŸ•Ÿ,ğŸ•”,ğŸ• ,ğŸ••,ğŸ•¡,ğŸ•–,ğŸ•¢,ğŸ•—,ğŸ•£,ğŸ•˜,ğŸ•¤,ğŸ•™,ğŸ•¥,ğŸ•š,ğŸ•¦,ğŸŒ€,ğŸƒ,ğŸ€„,ğŸ´,ğŸ”‡,ğŸ”ˆ,ğŸ”‰,ğŸ”Š,ğŸ“¢,ğŸ“£,ğŸ“¯,ğŸ””,ğŸ”•,ğŸµ,ğŸ¶,ğŸ’¹,ğŸ§,ğŸš®,ğŸš°,ğŸš¹,ğŸšº,ğŸš»,ğŸš¼,ğŸš¾,ğŸš¸,â›”,ğŸš«,ğŸš³,ğŸš­,ğŸš¯,ğŸš±,ğŸš·,ğŸ“µ,ğŸ”,â¤´ï¸,â¤µï¸,ğŸ”ƒ,ğŸ”„,ğŸ”™,ğŸ”š,ğŸ”›,ğŸ”œ,ğŸ”,ğŸ›,ğŸ•‰ï¸,ğŸ•,ğŸ”¯,â›,ğŸ”€,ğŸ”,ğŸ”‚,â©,â­ï¸,â¯ï¸,âª,â®ï¸,ğŸ”¼,â«,ğŸ”½,â¬,â¸ï¸,â¹ï¸,âºï¸,ğŸ¦,ğŸ”…,ğŸ”†,ğŸ“¶,ğŸ“³,ğŸ“´,â•,â–,â—,â“,â”,â•,â—,ã€°ï¸,ğŸ’±,ğŸ’²,ğŸ”±,ğŸ“›,ğŸ”°,â­•,âŒ,â,â°,â¿,ã€½ï¸,#ï¸âƒ£,*ï¸âƒ£,0ï¸âƒ£,1ï¸âƒ£,2ï¸âƒ£,3ï¸âƒ£,4ï¸âƒ£,5ï¸âƒ£,6ï¸âƒ£,7ï¸âƒ£,8ï¸âƒ£,9ï¸âƒ£,ğŸ”Ÿ,ğŸ” ,ğŸ”¡,ğŸ”¢,ğŸ”£,ğŸ”¤,ğŸ…°ï¸,ğŸ†,ğŸ…±ï¸,ğŸ†‘,ğŸ†’,â“‚ï¸,ğŸ†“,â„¹ï¸,ğŸ†•,ğŸ†–,ğŸ†—,ğŸ†™,ğŸ…¿ï¸,ğŸ…¾ï¸,ğŸ†˜,ğŸ†”,ğŸ†š,ğŸˆ,ğŸˆ‚ï¸,ğŸˆ·ï¸,ğŸˆ¶,ğŸˆ¯,ğŸ‰,ğŸˆ¹,ğŸˆš,ğŸˆ²,ğŸ‰‘,ğŸˆ¸,ğŸˆ´,ğŸˆ³,ğŸˆº,ğŸˆµ,ğŸ”´,ğŸ”µ,âš«,âšª,â¬›,â¬œ,ğŸ”¶,ğŸ”·,ğŸ”¸,ğŸ”¹,ğŸ”º,ğŸ”»,ğŸ’ ,ğŸ”˜,ğŸ”³,ğŸ”²,ğŸ,ğŸš©,ğŸŒ,ğŸ´,ğŸ³ï¸,ğŸ³ï¸â€ğŸŒˆ,ğŸ´â€â˜ ï¸";
        var emojis = emoji.split(",");
        for (i = 0; i < emojis.length; i++) {
          list += "<i>" + emojis[i] + "</i>\n";
        }
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_emoji7_ttip }}">ğŸ’˜</span> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style emoji-list",
            contents: list,
            callback: function ($dropdown) {
              $dropdown.find("i").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).html());
                  GSC.CopyClipboard($(this).html());
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // PluginSelector() listbox
      var PluginSelector = function (context) {
        var ui = $.summernote.ui;
        var list = ui.buttonGroup([
          ui.button({
            className: "dropdown-toggle",
            contents: '<span title="{{ l.a_summer_plugins_ttip }}" class="fas fa-plug"></> <span class="caret"></span>',
            data: {
              toggle: "dropdown"
            }
          }),
          ui.dropdown({
            className: "dropdown-style",
            contents: '<ol><li data-copy=\' [remote_content url=""] \'>remote_content</li></ol>',
            callback: function ($dropdown) {
              $dropdown.find("li").each(function () {
                $(this).click(function () {
                  context.invoke("editor.restoreRange");
                  context.invoke("editor.focus");
                  context.invoke("editor.insertText", $(this).data("copy"));
                  GSC.CopyClipboard($(this).data("copy"));
                });
              });
            }
          })
        ]);
        return list.render();
      }

      // FullScreen() button
      var FullScreenButton = function (context) {
        var ui = $.summernote.ui;
        var button = ui.button({
          contents: '<span title="{{ l.a_summer_fullscreen_ttip }}"><i class="fas fa-expand"></i></span>',
          codeviewKeepButton: true,
          click: function (e) {
            context.invoke("fullscreen.toggle");
            context.invoke("codeview.toggle");
          }
        });
        return button.render();
      }

      // Summernote configuration
      $(".summernote").summernote({
        codeviewFilter: true,
        codeviewIframeFilter: true,
        dialogsInBody: false,
        disableDragAndDrop: true,
        height: 300,
        codemirror: {
          theme: "material-darker"
        },
        lang: '{{#langcs}}cs-CZ{{/langcs}}{{#langen}}en-US{{/langen}}',
        maximumImageFileSize: 1024 * 1024 * 4,
        placeholder: '{{#langcs}}VÃ­tejte v Summernote!{{/langcs}}{{#langen}}Welcome to Summernote!{{/langen}}',
        callbacks: {
          onChange: function (contents, $editable) {
            $("div.note-btn-group.note-custom2>button").removeClass("blue").addClass("red");
          }
        },
        tableClassName: "table table-bordered striped highlight responsive-table",
        styleTags: [
          "p", "blockquote", "pre", "h2", "h3", "h4", "h5", "h6",
        ],
        lineHeights: [
          "0.2", "0.3", "0.4", "0.5", "0.6", "0.8", "1.0", "1.2", "1.4", "1.5", "2.0", "3.0"
        ],
        fontSizes: [
          "6", "7", "8", "9", "10", "11", "12", "14", "16", "18", "20", "24", "30", "36", "42", "48", "55", "64", "82", "100", "130", "160", "200"
        ],
        toolbar: [
          ["style", ["style"]],
          ["font", ["bold", "italic", "underline", "fontsize", "fontname", "strikethrough", "superscript", "subscript", "clear"]],
          ["color", ["forecolor", "backcolor", "color"]],
          ["paragraph", ["ul", "ol", "paragraph", "height"]],
          ["table", ["table"]],
          ["insert", ["hr", "link", "picture", "video"]],
          ["history", ["undo", "redo"]],
          ["emojis", ["emoji1", "emoji2", "emoji3", "emoji4", "emoji5", "emoji6", "emoji7"]],
          ["view", ["fs"]],
          ["custom1", ["plugins", "history"]],
          ["close", ["destroy"]],
          ["custom2", ["saveall"]],
        ],
        buttons: {
          destroy: DestroyButton,
          emoji1: Emoji1Selector,
          emoji2: Emoji2Selector,
          emoji3: Emoji3Selector,
          emoji4: Emoji4Selector,
          emoji5: Emoji5Selector,
          emoji6: Emoji6Selector,
          emoji7: Emoji7Selector,
          fs: FullScreenButton,
          history: HistorySelector,
          plugins: PluginSelector,
          saveall: SaveAllButton,
        }
      });
      $("#a_summernote").removeAttr("disabled");
    }

    // admin UI bindings and GSC functions
    w.GSC.init.push(function () {
      w.GSC.names.push("admin UI - bind");
      if (!getCookie("motyle") || getCookie("motyle") == "false") {
        $("#admin_main").show(100);
      }
      // wrench
      $(".motyle").click(function () {
        $("#admin_main").toggle(200, function () {
          window.scrollTo(0, 0);
          setCookie("motyle", $("#admin_main").is(":hidden"));
        })
      });

      // articles URL selector
      $("#ArticleURLSelect").change(function () {
        window.location.pathname = $('#ArticleURLSelect').val();
      });
      // remote function selector
      $("#RemoteFnSelect").change(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#sectok_ping", false);
        }
        if (!$("#RemoteFnSelect").val()) return;
        // API: GetUpdateToken
        $.get("/admin/GetUpdateToken?" + Date.now(), function (data) {
          var s = $("#RemoteFnSelect").val();
          var t = data.data[0];
          t = t.replace(/[a-zA-Z]*\?/, s + "?");
          GSC.CopyClipboard(t);
          GSC.PingDot("#sectok_ping");
          M.toast({text: s + " {{ l.a_remotecode }}: {{ l.a_clipboardcopy }}"});
        }).fail(function () {
          $("#a_security_token").val("N/A");
          GSC.PingDot("#sectok_ping", false);
          GSC.CopyClipboard("");
          M.toast({text: "{{ l.a_error_general }}"});
        });
      });
      // update CSV data
      $("#a_update").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#csv_ping", false);
        }
        $("#a_update").attr("disabled", "disabled");
        setTimeout(function () {
          $("#a_update").removeAttr("disabled");
        }, 30E3);
        // API: CoreUpdate
        $.post("/admin/CoreUpdate");
        M.toast({text: "{{ l.a_processing_data }}"});
      });

      // invoke Summernote editor
      $("#a_summernote").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#psi_ping", false); // ???
        }
        GSC.ReadArticles(function () {
          GSC.DeploySummernote();
        });
      });

      // file manager
      $("#a_files").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#csv_ping", false);
        }
        // clear file & upload content if present
        if (getCookie("open_filemanager") == 1) {
          return GSC.CloseFileManager();
        }
        GSC.RenderUploadInfo();
      });

      // GSC.CloseFileManager
      if (typeof GSC.CloseFileManager !== "function") GSC.CloseFileManager = function() {
          delCookie("open_filemanager");
          $("#a_file_manager").hide(50);
          $("#a_uploader_progress").html("");
      }

      // GSC.RenderUploadInfo()
      if (typeof GSC.RenderUploadInfo !== "function") GSC.RenderUploadInfo = function() {
        $.get("/admin/GetUploadFileInfo?" + Date.now(), function (data) {
          if (data && data.data) {
            setCookie("open_filemanager", 1); // remember state
            GSC.PingDot("#summer_ping");
            var s = '<h5>{{ l.a_files_ttip }} ';
            s += '<span title="reload" onclick="javascript:GSC.RenderUploadInfo()" class="hover"><i class="blue-text fas fa-sync-alt"></i></span>&nbsp;';
            s += '<span title="close" onclick="javascript:GSC.CloseFileManager()" class="hover">âŒ</span></h5>';
            var now = ~~(Date.now() / 1000);
            moment.locale("{{ lang }}");

            // preprocess last uploads
            var last = [];
            if (localStorage["last_upload"]) {
              var x = JSON.parse(localStorage["last_upload"]);
              for (var i in x) last[i] = x[i];
            }

            // UPLOAD: render HTML
            var t = 0;
            for (var i in data.data) {
              if (data.data[i]["thumbnail"] === null) continue;
              t++;
              if (t == 1) {
                s += '<hr><div class="row">';
              }
              if (t > 6) { // MAX columns
                t = 1;
                s += '</div><div class="row">';
              }
              var ext = GSC.GetFileExtension(i); // extension
              var newfile = "";
              if (last[i]) { // set new status
                newfile = '<b style="font-size:2em">ğŸ†•</b>&nbsp;';
              }
              s += '<div class="left-align col l2 m4 s12" onmouseover="this.style.backgroundColor=\'#222\';" onmouseout="this.style.backgroundColor=\'\';"><a title="{{ l.a_open_tit }}" class="hover" ';
              s += 'onclick="javascript:window.open(\'/upload/' + i + '\', \'preview\', \'location,resizable,scrollbars,status\');">';
              if (data.data[i]["thumbnail"]) s += '<img alt="thumbnail" class="responsive-img hide-on-med-and-up" height=50px src="{{ cdn }}' + data.data[i]["thumbnail"] + '"><br>';
              if (data.data[i]["thumbnail150"]) s += '<img alt="thumbnail" class="responsive-img hide-on-small-only" height=150px src="{{ cdn }}' + data.data[i]["thumbnail150"] + '"><br>';
              s += '<span title="' + i + '" class="truncate">' + newfile + i + '</span></a>';
              s += '<span>{{ l.a_age }}&nbsp;';
              s += moment.duration(Math.abs(~~((now - data.data[i]["timestamp"]))), "seconds").humanize();
              s += ',&nbsp;';
              s += GSC.FormatBytes(data.data[i]["size"]);
              s += '</span><br><br>';
              s += '<span title="ğŸ—‘ {{ l.a_delete_tit }}" class="mobilebutt left hover delete" data-id="' + i + '">âŒ</span>&nbsp; ';
              s += '<span title="ğŸ“‹ {{ l.a_copy_tit }}" class="mobilebutt right hover copydata" data-text="{{ BASE }}upload/' + i + '">ğŸ“‹</span>';
              // button separator
              s += '<span class="mobilebutt right">&nbsp;&nbsp;&nbsp;</span>';
              if (ext == "epub") s += '<a target=_blank title="EPUB" class="mobilebutt right hover" href="{{ BASE }}epub/upload/' + i + '">ğŸ“š</a>&nbsp; ';
              s += '<hr></div>';
            }
            if (t) {
              s += "</div>";
            } else {
              s += "&mdash;&mdash;&mdash;";
            }
            
            // show content
            document.getElementById("a_uploader_progress").scrollIntoView();
            window.scrollBy(0, -100);
            if ($("#a_file_manager").html() != "") {
              $("#a_file_manager").html(s).show();
            } else {
              $("#a_file_manager").hide().html(s).show(200);
            }
            
            // UPLOAD: copy path to clipboard
            $("#a_file_manager .copydata").click(function () {
              var x = $(this).data("text");
              GSC.CopyClipboard(x);
              M.toast({text: "ğŸ“‹ " + x});
            });
            
            // UPLOAD: file delete
            $("#a_file_manager .delete").click(function () {
              if (GSC.deleteconfirm || confirm("{{ l.a_delete_tit }}?")) {
                GSC.deleteconfirm = true;
                var x = $(this).data("id");
                // API: UploadedFileDelete
                $.post("/admin/UploadedFileDelete", {
                  name: x
                }).done(function (data) {
                  M.toast({text: "âŒ " + x});
                  GSC.RenderUploadInfo();
                });
              }
            });
          }
        });
      }

      // flush cache
      $("#a_flush").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#csv_ping", false);
        }
        GSC.GetCsvInfo = function () {};
        $("#a_flush").attr("disabled", "disabled");
        // API: FlushCache
        $.post("/admin/FlushCache");
        //window.location.reload(); // reload window
        location.replace("?nonce={{ nonce }}"); // reload window
      });

      // get auth code
      $("#a_getcode").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#csv_ping", false);
        }
        // API: CreateAuthCode
        $.post("/admin/CreateAuthCode", function (data) {
          GSC.CopyClipboard(data.data.hash);
          M.toast({text: "CreateAuthCode ğŸ†— {{ l.a_clipboardcopy }} [" + data.data.hash + "]"});
        });
      });

      // delete auth code
      $("#a_delcode").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#csv_ping", false);
        }
        // API: DeleteAuthCode
        $.post("/admin/DeleteAuthCode", function (data) {
          M.toast({text: "DeleteAuthCode ğŸ†— {{ l.a_codedeleted }}"});
          GSC.CopyClipboard("");
        });
      });

      $("#a_logout").click(function () {
        setCookie("logout", "logout");
        GSC.offline ? window.location.replace("/?nonce=".Date.now()) : window.location.replace("/logout");
      });

    });

    // CSV info timer
    w.GSC.init.push(function () {
      w.GSC.names.push("CSV timer");
      if (!w.GSC.offline) GSC.ShowLoader("#a_update_info");
      setInterval(function () {
        window.GSC.GetCsvInfo();
      }, 2500);
      GSC.GetCsvInfo();
    });

    // show admin UI
    w.GSC.init.push(function () {
      w.GSC.names.push("show admin UI");
      GSC.AdminUI();
      // filemanager state
      if (getCookie("open_filemanager") == 1) {
        $("#a_file_manager").hide();
        GSC.RenderUploadInfo();
      }
    });

    // set uploader
    w.GSC.init.push(function () {
      w.GSC.names.push("ZeroUpload");
      ZeroUpload.setURL("/admin/upload");
      ZeroUpload.setMaxFiles(100);
      ZeroUpload.setMaxBytes(100 * 1024 * 1024); // 100 MB
      ZeroUpload.on("complete", function (response) {
        M.toast({text: "{{ l.a_uploading_finished }}"});
        var data = JSON.parse(response.data);
        if (data && data.data) {
          setCookie("open_filemanager", 1);
          localStorage["last_upload"] = JSON.stringify(data.data);
          GSC.RenderUploadInfo();
          return;
        }
      });
      ZeroUpload.on("start", function (files, userData) {
        M.toast({text: "{{ l.a_uploading }}"});
      });
      ZeroUpload.on("error", function (type, message, userData) {
        var s;
        console.log(message);
        switch (type) {
          case "maxbytes":
            s = "{{ l.a_upload_maxbytes }}";
            break;
          case "unsupported":
            s = "{{ l.a_upload_unsupported }}";
            break;
          case "maxfiles":
            s = "{{ l.a_upload_maxfiles }}";
            break;
          case "filetype":
            s = "{{ l.a_upload_filetype }}";
            break;
          case "http":
            s = "{{ l.a_upload_http }}";
            break;
          default:
            s = "{{ l.a_upload_ajax }}";
        }
        M.toast({text: s});
      });
      ZeroUpload.on("progress", function (progress, userData) {
        $("#a_uploader_progress").show(200).html(
          '<h5>{{ l.a_upload_ttip }}</h5><div style="padding:1em"><div class="row">' +
          '<strong>Progress:</strong> ' + progress.percent + ', ' +
          progress.elapsedHuman + ' elapsed</div>' +
          '<div><strong>Sent:</strong> ' + progress.dataSentHuman + ' of ' +
          progress.dataTotalHuman + ' (' + progress.dataRateHuman + ')</div>' +
          '<div><strong>Remaining:</strong> ' + progress.remainingTimeHuman + '</div></div>'
        );
      });
      // init uploader
      ZeroUpload.init();
      ZeroUpload.addDropTarget("#admin_main");
      // UI: upload button
      $("#a_upload").click(function () {
        if (w.GSC.offline) { // offline
          M.toast({text: "offline ğŸ“¶"});
          return GSC.PingDot("#csv_ping", false);
        }
        $("#a_uploader_progress").html("");
        ZeroUpload.chooseFiles();
      });
    });

    // end GSC.init
  }
})(window, document);
